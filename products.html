<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shop | ChocoFusion</title>
    <style>
        :root { --cocoa: #2d1b0e; --milk: #6d4c41; --cream: #fff8e1; --gold: #c5a059; --white: #ffffff; --dark-accent: #1a0f08; }
        body { font-family: 'Georgia', serif; margin: 0; background: var(--cream); color: var(--cocoa); }
        
        /* Unified Navigation */
        nav { background: var(--cocoa); padding: 1rem 5%; display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; z-index: 1000; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }
        .logo { font-size: 1.8rem; color: var(--gold); font-weight: bold; letter-spacing: 2px; text-decoration: none; text-transform: uppercase; }
        .nav-links { display: flex; list-style: none; gap: 30px; margin: 0; align-items: center; }
        .nav-links a { color: var(--white); text-decoration: none; font-size: 0.9rem; transition: 0.3s; font-weight: bold; text-transform: uppercase; }
        .nav-links a:hover { color: var(--gold); }
        .hamburger { display: none; cursor: pointer; flex-direction: column; gap: 5px; }
        .hamburger div { width: 25px; height: 3px; background: var(--white); border-radius: 2px; }

        /* Realistic Modern Floating Cart Button */
        .floating-cart { 
            position: fixed; 
            bottom: 30px; 
            right: 30px; 
            background: var(--cocoa); 
            color: var(--white); 
            padding: 14px 28px;
            border-radius: 50px; 
            display: flex; 
            align-items: center; 
            gap: 12px;
            font-weight: bold; 
            cursor: pointer; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.4); 
            z-index: 2000; 
            text-decoration: none; 
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); 
            border: 1px solid var(--gold);
            letter-spacing: 1px;
            font-size: 0.9rem;
        }

        .floating-cart:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 15px 30px rgba(0,0,0,0.5);
            background: var(--dark-accent);
        }

        /* The Count Badge */
        #badgeCount { 
            background: var(--gold); 
            color: var(--cocoa);
            font-size: 0.8rem; 
            padding: 2px 10px;
            border-radius: 20px;
            min-width: 12px;
            text-align: center;
        }

        /* Product Grid */
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 40px; max-width: 1200px; margin: 60px auto; padding: 0 20px; }
        .card { background: white; padding: 25px; border-radius: 15px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .card img { width: 100%; height: 250px; object-fit: cover; border-radius: 10px; margin-bottom: 20px; }
        .price { font-size: 1.2rem; font-weight: bold; color: var(--milk); }
        .add-btn { background: var(--cocoa); color: white; border: none; padding: 15px; width: 100%; border-radius: 8px; cursor: pointer; margin-top: 15px; font-weight: bold; text-transform: uppercase; transition: 0.3s; }
        .add-btn:hover { background: var(--gold); color: var(--cocoa); }

        /* Custom Realistic Prompt Modal */
        #qtyModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 3000; align-items: center; justify-content: center; backdrop-filter: blur(4px); }
        .modal-box { background: white; width: 90%; max-width: 400px; padding: 30px; border-radius: 15px; text-align: center; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        .modal-box h2 { margin-top: 0; color: var(--cocoa); font-style: italic; border-bottom: 1px solid #eee; padding-bottom: 15px; }
        .qty-input-wrapper { display: flex; align-items: center; justify-content: center; gap: 15px; margin: 25px 0; }
        .qty-btn { width: 45px; height: 45px; border-radius: 50%; border: 1px solid var(--cocoa); background: white; font-size: 1.5rem; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
        .qty-btn:hover { background: var(--cream); }
        #qtyValue { font-size: 1.8rem; font-weight: bold; min-width: 50px; }
        .confirm-btn { background: var(--gold); color: var(--cocoa); border: none; padding: 15px 30px; border-radius: 50px; font-weight: bold; cursor: pointer; width: 100%; font-size: 1rem; text-transform: uppercase; letter-spacing: 1px; }

        @media (max-width: 768px) {
            .hamburger { display: flex; }
            .nav-links { display: none; position: absolute; top: 65px; left: 0; width: 100%; background: var(--cocoa); flex-direction: column; padding: 30px 0; text-align: center; }
            .nav-links.active { display: flex; }
            .floating-cart { bottom: 20px; right: 20px; padding: 10px 20px; }
        }
    </style>
</head>
<body>
    <nav>
        <a href="index.html" class="logo">ChocoFusion</a>
        <div class="hamburger" onclick="toggleMenu()"><div></div><div></div><div></div></div>
        <ul class="nav-links" id="navLinks">
            <li><a href="index.html">Home</a></li>
            <li><a href="products.html">Chocolates</a></li>
            <li><a href="about.html">Our Story</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </nav>

    <h1 style="text-align: center; margin-top: 50px;">The Fusion Collection</h1>

    <div class="grid">
        <div class="card">
            <img src="images/ChocolateBar.webp" alt="Lavender Dark">
            <h3>Lavender Midnight Dark</h3>
            <p class="price">$9.50</p>
            <button class="add-btn" onclick="openQtyModal('Lavender Midnight', 9.50)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="images/ChocolateBar2.webp" alt="Sea Salt">
            <h3>Himalayan Sea Salt Milk</h3>
            <p class="price">$8.50</p>
            <button class="add-btn" onclick="openQtyModal('Sea Salt Milk', 8.50)">Add to Cart</button>
        </div>
        <div class="card">
            <img src="images/Cocolates5Pack.png" alt="Variety Box">
            <h3>Signature Fusion Box (5pk)</h3>
            <p class="price">$28.00</p>
            <button class="add-btn" onclick="openQtyModal('Fusion Box', 28.00)">Add to Cart</button>
        </div>
    </div>

    <a href="cart.html" class="floating-cart" id="cartBadge">
        VIEW BAG
        <span id="badgeCount">0</span>
    </a>

    <div id="qtyModal">
        <div class="modal-box">
            <h2 id="modalProdName">Select Quantity</h2>
            <p style="color: #666; font-size: 0.9rem;">How many bars would you like to add to your bag?</p>
            <div class="qty-input-wrapper">
                <button class="qty-btn" onclick="changeQty(-1)">-</button>
                <span id="qtyValue">1</span>
                <button class="qty-btn" onclick="changeQty(1)">+</button>
            </div>
            <button class="confirm-btn" onclick="confirmAddToCart()">Add to Bag</button>
            <p style="margin-top: 15px; font-size: 0.8rem; cursor: pointer; text-decoration: underline; color: #888;" onclick="closeModal()">Cancel</p>
        </div>
    </div>

    <script>
        let currentItem = { name: "", price: 0, qty: 1 };

        function toggleMenu() { document.getElementById('navLinks').classList.toggle('active'); }

        function openQtyModal(name, price) {
            currentItem = { name, price, qty: 1 };
            document.getElementById('modalProdName').innerText = name;
            document.getElementById('qtyValue').innerText = "1";
            document.getElementById('qtyModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('qtyModal').style.display = 'none';
        }

        function changeQty(amt) {
            currentItem.qty = Math.max(1, currentItem.qty + amt);
            document.getElementById('qtyValue').innerText = currentItem.qty;
        }

        function confirmAddToCart() {
            let cart = JSON.parse(localStorage.getItem('chocoCart')) || [];
            cart.push({ 
                name: currentItem.name, 
                price: currentItem.price, 
                qty: currentItem.qty 
            });
            localStorage.setItem('chocoCart', JSON.stringify(cart));
            
            updateBadge();
            closeModal();
            
            // Subtle visual confirmation on the cart button
            const badge = document.getElementById('cartBadge');
            badge.style.transform = 'scale(1.1)';
            setTimeout(() => badge.style.transform = 'translateY(0)', 200);
        }

        function updateBadge() {
            let cart = JSON.parse(localStorage.getItem('chocoCart')) || [];
            // Updates the count within the gold bubble
            document.getElementById('badgeCount').innerText = cart.length;
        }

        // Close modal when clicking outside of the white box
        window.onclick = function(event) {
            const modal = document.getElementById('qtyModal');
            if (event.target == modal) {
                closeModal();
            }
        }

        // Initial badge update on load
        updateBadge();
    </script>
</body>
</html>